{"version":3,"sources":["app.js","const.js"],"names":["sidebar","document","querySelector","closeBtn","Logout","BtnUpdateSpending","querySelectorAll","Modal","DeleteSpending","IdScript","Update","ModalAdd","CloseModal","User","Categoria","InputProducto","Venta","Detalles","CantidadPagar","Cancelar","FinalizarVenta","Id","view","ProductosDonas","objVentaProductos","cveusuario_venta","total_venta","cantidad_venta","pago_venta","cambio_venta","TotalDetalle","TotalVenta","SpendingData","InfoProducto","DetalleVenta","InfoDetalle","objVenta","id","nombre_producto","descripcion_producto","precioVenta_producto","CantidadProductos","CantidadTotalProductos","UserRol","remove","CalcPrevisto","forEach","pre","parseInt","textContent","classList","add","menuBtnChange","contains","replace","ModalView","e","preventDefault","Descripcion","Previsto","Real","value","async","GetSpending","url","URL_CONFIG","respuesta","fetch","method","json","ClassUpdate","getId","buttonId","target","nodeName","parentElement","AddValues","find","x","spend","descripcion_gasto","previsto_gasto","real_gasto","addSpending","updateSpendig","ValidarModal","Formulario","FormData","resultado","body","Swal","fire","icon","title","text","button","then","setTimeout","window","location","href","error","idModal","append","console","log","deleteSpen","guardado","reload","ImprimirAlerta","mensaje","AlertaP","ObtenerCategoria","i","length","nombre_categoria","MostrarCategoria","OpcionCategoria","createElement","appendChild","categoriaSeleccionada","Indice","selectedIndex","options","ProductoSeleccionado","push","catch","set","Set","map","JSON","stringify","arrSinDuplicaciones","Array","from","parse","filter","producto","cvecategoria_producto","MostrarProductos","TodosProductos","Producto","LimpiarOption","OpcionProducto","MostrarDetalleVenta","Cantidad","TextoEscogido","Detalle","detalles","DetalleVentas","idArray","prueba","contador","some","detalle","indiceElemento","el","Anterior","Actual","ImprimirDetalle","LimpiarTabla","trDetalles","tdNombreProducto","tdDescripcion","tdPrecio","tdCantidad","Total","tdBoton","Boton","onclick","EliminarProducto","innerHTML","TotalPagar","info","Cambio","CancelarVenta","swalWithBootstrapButtons","mixin","customClass","confirmButton","cancelButton","buttonsStyling","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","result","isConfirmed","dismiss","DismissReason","cancel","AgregarVenta","FormularioVenta","firstChild","removeChild","Alert","close","addEventListener","Parametro","URLSearchParams","search","get","Vista","toggle","updateSpending","Delete"],"mappings":"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","file":"bundle.js","sourcesContent":["/* ***VARIABLES*** */\r\nlet sidebar = document.querySelector(\".sidebar\");\r\nlet closeBtn = document.querySelector(\"#btn\");\r\nconst Logout = document.querySelector('#logout');\r\nconst BtnUpdateSpending = document.querySelectorAll('.btn-gasto');\r\nconst Modal = document.querySelector('#modal-gasto');\r\nconst DeleteSpending = document.querySelectorAll('#btn-eliminar');\r\nconst IdScript = document.querySelector('#test-id');\r\nconst Update = document.querySelector('.updateSpendig');\r\nconst ModalAdd = document.querySelector('.add');\r\nconst CloseModal = document.querySelector('.btn-close');\r\nconst User = document.querySelector('.user');\r\nconst Categoria = document.querySelector('#categoria');\r\nconst InputProducto = document.querySelector('#producto');\r\nconst Venta = document.querySelector('.agregarProducto');\r\nconst Detalles = document.querySelector('#detallesBody');\r\nconst CantidadPagar = document.querySelector('#cantidadPagar');\r\nconst Cancelar = document.querySelector('.btn-cancelar');\r\nconst FinalizarVenta = document.querySelector('#finalizarVenta');\r\nlet objVentaProductos = {\r\n  cveusuario_venta :'',\r\n  total_venta : '',\r\n  cantidad_venta: '',\r\n  pago_venta: '',\r\n  cambio_venta: ''\r\n};\r\nlet TotalDetalle = 0;\r\nlet TotalVenta = 0;\r\nlet SpendingData = [];\r\nlet InfoProducto = [];\r\nlet Id;\r\nlet view;\r\nlet ProductosDonas;\r\nlet DetalleVenta = [];\r\nlet InfoDetalle = [];\r\nlet objVenta = {\r\n  id: '', \r\n  nombre_producto : '', \r\n  descripcion_producto : '',\r\n  precioVenta_producto : ''\r\n};\r\nlet CantidadProductos = 0, CantidadTotalProductos = 0;\r\n/* let DetalleVentaAgre = {\r\n  idventa_detalle: '',\r\n  idproducto_detalle: '',\r\n  cantidad_detalle: '',\r\n  precio\r\n}; */\r\n/* ***EVENT LISTENERS*** */\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n  try {\r\n    UserRol();\r\n    const Parametro = new URLSearchParams(window.location.search);\r\n    Id = parseInt(Parametro.get('id'));\r\n    const Vista = new URLSearchParams(window.location.search);\r\n    view = parseInt(Vista.get('View'));\r\n    closeBtn.addEventListener(\"click\", ()=>{\r\n      sidebar.classList.toggle(\"open\");\r\n      menuBtnChange();\r\n    });\r\n    await GetSpending().then((x)=>{\r\n      SpendingData.push(...x.resultado);\r\n    }).catch(error => {\r\n      console.log(error);\r\n    });\r\n    if(view === 8){\r\n      ModalAdd.addEventListener('click', ModalView);\r\n      Modal.addEventListener('submit', addSpending);\r\n      BtnUpdateSpending.forEach((updateSpending) => {\r\n        updateSpending.addEventListener('click', getId);\r\n      });\r\n      DeleteSpending.forEach((Delete) => {\r\n        Delete.addEventListener('submit', deleteSpen);\r\n      });\r\n      CloseModal.addEventListener('click', ClassUpdate);\r\n      CalcPrevisto();\r\n    }\r\n    Logout.addEventListener('click', Alert);\r\n    if(view === 9){\r\n      objVentaProductos.cveusuario_venta = Id;\r\n      ObtenerCategoria();\r\n      Categoria.addEventListener('change', categoriaSeleccionada);\r\n      Venta.addEventListener('click', MostrarDetalleVenta);\r\n      CantidadPagar.addEventListener('blur', Cambio);\r\n      Cancelar.addEventListener('click', CancelarVenta)\r\n      FinalizarVenta.addEventListener('submit', AgregarVenta);\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\n/* ***FUNCIONES*** */\r\nfunction UserRol(){\r\n  if(User){\r\n    User.remove();\r\n  }\r\n}\r\nfunction CalcPrevisto(){\r\n  const diferencia = document.querySelectorAll('#diferenteTable');\r\n\r\n  diferencia.forEach(pre => {\r\n    if(parseInt(pre.textContent) < 0){\r\n      pre.classList.add('text-danger');\r\n    }else{\r\n      pre.classList.remove('text-danger')\r\n    }\r\n  });\r\n}\r\nfunction menuBtnChange() {\r\n if(sidebar.classList.contains(\"open\")){\r\n   closeBtn.classList.replace(\"bx-menu\", \"bx-menu-alt-right\");\r\n }else {\r\n   closeBtn.classList.replace(\"bx-menu-alt-right\",\"bx-menu\");\r\n }\r\n}\r\nfunction ModalView(e){\r\n  e.preventDefault();\r\n  const Descripcion = document.querySelector('#descripcion');\r\n  const Previsto = document.querySelector('#previsto');\r\n  const Real = document.querySelector('#real');\r\n  Descripcion.value = '';\r\n  Previsto.value = '';\r\n  Real.value = '';\r\n}\r\nasync function GetSpending(){\r\n  const url = `${URL_CONFIG}Dashboard/getGasto`;\r\n  const respuesta = await fetch(url, {\r\n    method: 'GET'\r\n  });\r\n  const resultado = await respuesta.json();\r\n  return resultado;\r\n}\r\nfunction ClassUpdate(e){\r\n  e.preventDefault();\r\n  if(Modal.classList.contains('update')){\r\n    Modal.classList.remove('update');\r\n  }\r\n}\r\nfunction getId(e){\r\n  e.preventDefault();\r\n  Modal.classList.add('update');\r\n  let buttonId = '';\r\n  switch(e.target.nodeName){\r\n    case 'path':\r\n      buttonId = e.target.parentElement.parentElement.id; \r\n      break;\r\n    case 'svg':\r\n      buttonId = e.target.parentElement.id;\r\n      break;\r\n    default:\r\n      buttonId = e.target.id;\r\n      break;\r\n  }\r\n  document.querySelector('#idgasto').value = buttonId;\r\n  let Spend = SpendingData.find(x => x.id === buttonId);\r\n  AddValues(Spend);\r\n}\r\nfunction AddValues(spend){\r\n  document.querySelector('#descripcion').value = spend.descripcion_gasto;\r\n  document.querySelector('#previsto').value = spend.previsto_gasto;\r\n  document.querySelector('#real').value = spend.real_gasto || '';\r\n}\r\nasync function addSpending(e){\r\n  try{\r\n    e.preventDefault();\r\n    if(!Modal.classList.contains('update')){\r\n      ValidarModal();\r\n      const Formulario = new FormData(Modal);\r\n      const url = `${URL_CONFIG}Dashboard/modal`;\r\n      const resultado = await fetch(url, {\r\n        method: 'POST',\r\n        body: Formulario\r\n      });\r\n      const respuesta = await resultado.json();\r\n      if(respuesta.resultado){\r\n        Swal.fire({\r\n          icon: 'success',\r\n          title: 'Gasto agregado',\r\n          text: 'Tu gasto fue agregado correctamente',\r\n          button: 'OK'\r\n        }).then( () => {\r\n          setTimeout(() => {\r\n              window.location.href = `${URL_CONFIG}Dashboard/dashboard?View=8&id=${Id}`;\r\n          }, 1000);\r\n        });\r\n      }\r\n    }else{\r\n      updateSpendig();\r\n    } \r\n  }catch(error){\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar tu gasto'\r\n    });\r\n  }\r\n}\r\nasync function updateSpendig(){\r\n  try{\r\n    const idModal = document.querySelector('#idgasto').value;\r\n    const url = `${URL_CONFIG}Dashboard/editar-gasto`;\r\n    const Formulario = new FormData();\r\n    Formulario.append('id', idModal);\r\n    Formulario.append('descripcion_previsto', document.querySelector('#descripcion').value);\r\n    Formulario.append('previsto_gasto', document.querySelector('#previsto').value);\r\n    Formulario.append('real_gasto', document.querySelector('#real').value);\r\n    const respuesta = await fetch(url, {\r\n      method: 'POST',\r\n      body: Formulario\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.resultado){\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Gasto Actualizado',\r\n        text: 'Tu gasto fue actualizado correctamente',\r\n        button: 'OK'\r\n      }).then( () => {\r\n        window.location.href = `${URL_CONFIG}Dashboard/dashboard?View=8&id=${Id}`;\r\n      });\r\n      Modal.classList.remove('update');\r\n    }\r\n  }catch(error){\r\n    console.log(error);\r\n  }\r\n  \r\n}\r\nasync function deleteSpen(e){\r\n  try{\r\n    e.preventDefault();\r\n    const id = document.querySelector('#eliminar-gasto').value;\r\n    const Formulario = new FormData();\r\n    Formulario.append('id',id);\r\n    const url = `${URL_CONFIG}Dashboard/eliminar-gasto`;\r\n    const respuesta = await fetch(url, {\r\n      method: 'POST',\r\n      body: Formulario\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.guardado){\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Gasto Eliminado',\r\n        text: 'Tu gasto fue eliminado correctamente',\r\n        button: 'OK'\r\n      }).then( () => {\r\n        window.location.reload();\r\n      });\r\n    }\r\n  }catch(error){\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar tu gasto'\r\n    });\r\n  }\r\n}\r\nfunction ValidarModal(){\r\n  const descripcion_gasto = document.querySelector('#descripcion').value,\r\n      previsto_gasto = document.querySelector('#previsto').value;\r\n  if(descripcion_gasto === '' || previsto_gasto === ''){\r\n    ImprimirAlerta('Descripción y/o Gasto previsto Obligatorio');\r\n    return;\r\n  }\r\n}\r\nfunction ImprimirAlerta(mensaje){\r\n  const AlertaP = document.querySelector('.errores-modal');\r\n  if(!AlertaP.classList.contains('error-alerta')){\r\n    AlertaP.textContent = mensaje;\r\n    AlertaP.classList.add('error-alerta');\r\n  }\r\n  setTimeout(()=>{\r\n    AlertaP.classList.remove('error-alerta');\r\n    AlertaP.textContent = '';\r\n  },5000);\r\n}\r\n\r\n/* ***PUNTO DE VENTA*** */\r\n\r\nasync function ObtenerCategoria(){\r\n  try {\r\n    const url = `${URL_CONFIG}Dashboard/venta`;\r\n    const respuesta = await fetch(url, {\r\n      method: 'GET'\r\n    });\r\n    const resultado = await respuesta.json();\r\n    for(let i=0; i<resultado.resultado.length; i++){\r\n      const {id, nombre_categoria} = resultado.resultado[i];\r\n      MostrarCategoria(id, nombre_categoria);\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction MostrarCategoria(id, nombre_categoria ){\r\n  const OpcionCategoria = document.createElement('OPTION');\r\n  OpcionCategoria.value = id;\r\n  OpcionCategoria.textContent = nombre_categoria;\r\n  Categoria.appendChild(OpcionCategoria);\r\n}\r\n\r\nasync function categoriaSeleccionada(e){\r\n  e.preventDefault();\r\n  let Indice = e.target.selectedIndex;\r\n  let TextoEscogido = e.target.options[Indice].text;\r\n  await ProductoSeleccionado().then(x => {\r\n    InfoProducto.push(...x.resultado);\r\n  }).catch(error => {\r\n    console.log(error);\r\n  });\r\n\r\n  //https://es.stackoverflow.com/questions/41202/eliminar-un-array-de-objetos-duplicados-en-javascript/41206\r\n  let set = new Set( InfoProducto.map( JSON.stringify ) )\r\n  let arrSinDuplicaciones = Array.from( set ).map( JSON.parse );\r\n  ProductosDonas = arrSinDuplicaciones.filter(producto => parseInt(producto.cvecategoria_producto) === Indice);\r\n  MostrarProductos(ProductosDonas);\r\n}\r\n\r\nasync function ProductoSeleccionado(){\r\n  const url = `${URL_CONFIG}Dashboard/producto`;\r\n  const TodosProductos = await fetch(url, {\r\n    method: 'GET'\r\n  });\r\n  const ResultadoProductos = await TodosProductos.json();\r\n  return ResultadoProductos;\r\n}\r\n\r\nfunction MostrarProductos(Producto){\r\n  LimpiarOption();\r\n  Producto.forEach(producto => {\r\n    const {id, nombre_producto} = producto;\r\n    \r\n    const OpcionProducto = document.createElement('OPTION');\r\n    OpcionProducto.value = id;\r\n    OpcionProducto.textContent = nombre_producto;\r\n    InputProducto.appendChild(OpcionProducto);\r\n  });\r\n}\r\nfunction MostrarDetalleVenta(e){\r\n  e.preventDefault();\r\n  const Producto = document.querySelector('#producto');\r\n  const Cantidad = document.querySelector('#cantidad').value;\r\n  let Indice = Producto.selectedIndex;\r\n  let TextoEscogido = Producto.options[Indice].text;\r\n  let Detalle = ProductosDonas.filter(detalles => detalles.nombre_producto === TextoEscogido);\r\n  let DetalleVentas = {\r\n  }\r\n  Detalle.forEach(idArray => {\r\n    const {id} = idArray;\r\n    DetalleVentas = {id, Cantidad};\r\n  });\r\n  DetalleVenta = [...DetalleVenta, ...Detalle];\r\n  DetalleVenta.forEach(prueba => {\r\n    const {id, nombre_producto, descripcion_producto, precioVenta_producto} = prueba;\r\n    objVenta = {\r\n      id, nombre_producto, descripcion_producto, precioVenta_producto, Cantidad\r\n    };\r\n    \r\n  })\r\n  let contador = 1;\r\n  const Existe = InfoDetalle.some((detalle) => {\r\n    if(parseInt(detalle.id) === parseInt(DetalleVentas.id) ){\r\n      contador++;\r\n      if(contador > 1){\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    }\r\n  }); \r\n  if(Existe){\r\n    //Actualizamos la cantidad\r\n    const indiceElemento = InfoDetalle.find(el => el.id === DetalleVentas.id);\r\n    let Anterior = parseInt(indiceElemento.Cantidad);\r\n    let Actual = parseInt(Cantidad)\r\n    indiceElemento.Cantidad = Anterior + Actual;\r\n  }else{\r\n    InfoDetalle = [...InfoDetalle, objVenta];\r\n  }\r\n  ImprimirDetalle(InfoDetalle);\r\n}\r\nfunction ImprimirDetalle(detalles){\r\n  LimpiarTabla();\r\n  detalles.forEach(detalle => {\r\n    const {id, nombre_producto, descripcion_producto, precioVenta_producto, Cantidad} = detalle;\r\n    const trDetalles = document.createElement('TR');\r\n    const tdNombreProducto = document.createElement('TD')\r\n    tdNombreProducto.textContent = nombre_producto;\r\n    const tdDescripcion = document.createElement('TD');\r\n    tdDescripcion.textContent = descripcion_producto;\r\n    const tdPrecio = document.createElement('TD');\r\n    tdPrecio.textContent = precioVenta_producto;\r\n    const tdCantidad = document.createElement('TD');\r\n    tdCantidad.textContent = Cantidad;\r\n    CantidadProductos += parseInt(Cantidad);\r\n    const Total = document.createElement('TD');\r\n    Total.textContent = `$${precioVenta_producto * Cantidad}`;\r\n    TotalDetalle += (precioVenta_producto * Cantidad);\r\n    const tdBoton = document.createElement('TD');\r\n    const Boton = document.createElement('BUTTON');\r\n    Boton.onclick = () => {\r\n      EliminarProducto(id);\r\n    }\r\n    Boton.innerHTML = `\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\r\n        <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\r\n        <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\r\n      </svg\r\n    `;\r\n    \r\n    Boton.classList.add('btn', 'eliminar');\r\n    tdBoton.appendChild(Boton);\r\n    trDetalles.appendChild(tdNombreProducto);\r\n    trDetalles.appendChild(tdDescripcion);\r\n    trDetalles.appendChild(tdPrecio);\r\n    trDetalles.appendChild(tdCantidad);\r\n    trDetalles.appendChild(Total);\r\n    trDetalles.appendChild(tdBoton);\r\n    Detalles.appendChild(trDetalles);\r\n  });\r\n  let TotalPagar = document.querySelector('#totalPagar') || 0;\r\n  TotalVenta = TotalDetalle;\r\n  TotalPagar.value = TotalVenta;\r\n  TotalDetalle = 0; \r\n  CantidadTotalProductos = CantidadProductos;\r\n  CantidadProductos = 0;\r\n\r\n  objVentaProductos.total_venta = TotalVenta\r\n  objVentaProductos.cantidad_venta = CantidadTotalProductos;\r\n}\r\nfunction EliminarProducto(id){\r\n  InfoDetalle.forEach(info => {\r\n    if(info.id === id){\r\n      if(info.Cantidad > 1){\r\n        info.Cantidad--;\r\n      }else{\r\n        InfoDetalle = InfoDetalle.filter(info => info.id !== id);\r\n      }\r\n    }\r\n  });\r\n  ImprimirDetalle(InfoDetalle);\r\n}\r\nfunction Cambio(e){\r\n  let Cantidad = parseInt(e.target.value) || '';\r\n  const Cambio = document.querySelector('#cambioPago');\r\n  Cambio.value = Cantidad  - TotalVenta;\r\n  objVentaProductos.pago_venta = Cantidad;\r\n  objVentaProductos.cambio_venta = Cantidad - TotalVenta;\r\n}\r\nfunction CancelarVenta(e){\r\n  e.preventDefault();\r\n  const swalWithBootstrapButtons = Swal.mixin({\r\n    customClass: {\r\n      confirmButton: 'btn btn-success',\r\n      cancelButton: 'btn btn-danger'\r\n    },\r\n    buttonsStyling: false\r\n  })\r\n  \r\n  swalWithBootstrapButtons.fire({\r\n    title: '¿Estas seguro de cancelar la venta?',\r\n    text: \"Esta accion no se puede revertir!\",\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonText: 'Si, Borrar!',\r\n    cancelButtonText: 'No, Cancelar!',\r\n    reverseButtons: true\r\n  }).then((result) => {\r\n    if (result.isConfirmed) {\r\n      swalWithBootstrapButtons.fire(\r\n        'Borrado!',\r\n        'Tu venta ha sido eliminada.',\r\n        'success'\r\n      );\r\n      window.location.href = `${URL_CONFIG}Dashboard/dashboard?View=9&id=${Id}`;\r\n    } else if (\r\n      /* Read more about handling dismissals below */\r\n      result.dismiss === Swal.DismissReason.cancel\r\n    ) {\r\n      swalWithBootstrapButtons.fire(\r\n        'Cancelado',\r\n        'Tu venta ha sido conservada',\r\n        'error'\r\n      )\r\n    }\r\n  })\r\n}\r\n\r\nasync function AgregarVenta(e){\r\n  try{\r\n    e.preventDefault();\r\n    const {cveusuario_venta, total_venta, cantidad_venta, pago_venta, cambio_venta} = objVentaProductos;\r\n    if(cveusuario_venta !== '' && total_venta !== '' && cantidad_venta !== ''  && pago_venta !== ''  && cambio_venta !== ''){\r\n      const url = `${URL_CONFIG}Dashboard/agregarVenta`;\r\n      const FormularioVenta = new FormData();\r\n      FormularioVenta.append('cveusuario_venta', cveusuario_venta);\r\n      FormularioVenta.append('total_venta', total_venta);\r\n      FormularioVenta.append('cantidad_venta', cantidad_venta);\r\n      FormularioVenta.append('pago_venta', pago_venta);\r\n      FormularioVenta.append('cambio_venta', cambio_venta);\r\n\r\n      const resultado = await fetch(url, {\r\n        method: 'POST',\r\n        body: FormularioVenta\r\n      });\r\n      const respuesta = await resultado.json();\r\n      if(respuesta.resultado){\r\n        Swal.fire({\r\n          icon: 'success',\r\n          title: 'Venta agregada',\r\n          text: 'Tu venta fue agregado correctamente',\r\n          button: 'OK'\r\n        }).then( () => {\r\n          setTimeout(() => {\r\n              window.location.href = `${URL_CONFIG}Dashboard/dashboard?View=9&id=${Id}`;\r\n          }, 1000);\r\n        });\r\n      }\r\n    }else{\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Oops...',\r\n        text: 'Faltas campos por llenar!',\r\n      })\r\n    }\r\n  }catch(error){\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Oops...',\r\n      text: 'Hubo un error al guardar tu venta!',\r\n    })\r\n  }\r\n  \r\n}\r\nfunction LimpiarTabla(){\r\n  while(Detalles.firstChild){\r\n    Detalles.removeChild(Detalles.firstChild);\r\n  }\r\n}\r\nfunction LimpiarOption(){\r\n  while(InputProducto.firstChild){\r\n    InputProducto.removeChild(InputProducto.firstChild);\r\n  }\r\n}\r\n/* ***SWEET ALERT*** */\r\nfunction Alert(e){\r\n  e.preventDefault();\r\n  const swalWithBootstrapButtons = Swal.mixin({\r\n    customClass: {\r\n      confirmButton: 'btn btn-success',\r\n      cancelButton: 'btn btn-danger'\r\n    },\r\n    buttonsStyling: false\r\n  });\r\n  swalWithBootstrapButtons.fire({\r\n    title: '¿Estas seguro de cerrar sesión?',\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonText: 'Si, seguro!',\r\n    cancelButtonText: 'No, cancelar!',\r\n    reverseButtons: true\r\n  }).then((result) => {\r\n    if (result.isConfirmed) {\r\n      window.location.href = '/logout';\r\n    } else if (\r\n      /* Read more about handling dismissals below */\r\n      result.dismiss === Swal.DismissReason.cancel\r\n    ) {\r\n      Swal.close();\r\n    }\r\n  })\r\n}","const URL_CONFIG = \"https://krispyantojo-production-dd55.up.railway.app/\";"]}